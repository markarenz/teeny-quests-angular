<div
  class="user-login-root w-12 h-12 md:relative {{
    isUserMenuOpen ? 'active' : null
  }}"
>
  @if(isUserMenuOpen){
  <button
    data-testid="user-menu-underlay"
    aria-hidden="true"
    role="button"
    (click)="toggleUserMenu()"
    class="under-menu fixed left-0 top-0 w-screen h-screen bg-gray-300/75 z-1"
  ></button>
  }
  <button
    role="button"
    (click)="toggleUserMenu()"
    class="w-12 h-12 block hover:scale-90 transition-transform relative"
  >
    <svg
      viewBox="0 0 26.458333 26.458333"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:svg="http://www.w3.org/2000/svg"
    >
      @if(isLoggedIn){
      <path
        d="M 13.229167,0.26458333 A 12.964583,12.964583 0 0 0 0.26458333,13.229167 12.964583,12.964583 0 0 0 13.229167,26.19375 12.964583,12.964583 0 0 0 26.19375,13.229167 12.964583,12.964583 0 0 0 13.229167,0.26458333 Z m 0,4.73562827 a 3.96875,3.96875 0 0 1 3.96875,3.96875 3.96875,3.96875 0 0 1 -3.96875,3.9687504 3.96875,3.96875 0 0 1 -3.9687503,-3.9687504 3.96875,3.96875 0 0 1 3.9687503,-3.96875 z M 9.4299154,12.634371 a 5.2916665,5.2916679 0 0 0 3.7987346,1.62574 5.2916665,5.2916679 0 0 0 3.784265,-1.611271 c 2.005487,0.930699 3.95273,2.351982 3.95273,3.905188 v 1.698088 c 0,1.446191 -0.983513,2.610693 -2.20555,2.610693 H 7.6977214 c -1.2220358,0 -2.2060669,-1.164502 -2.2060669,-2.610693 v -1.698088 c 0,-1.586691 1.9378589,-3.000256 3.9382609,-3.919657 z"
      />
      } @else {
      <path
        d="M 13.229167,0.26458333 A 12.964583,12.964583 0 0 0 0.3591512,11.90625 H 4.9387166 V 9.2604167 L 8.4666667,13.175423 4.9387166,17.197917 V 14.552083 H 0.3591512 A 12.964583,12.964583 0 0 0 13.229167,26.19375 12.964583,12.964583 0 0 0 26.19375,13.229167 12.964583,12.964583 0 0 0 13.229167,0.26458333 Z M 15.875,5.0002116 a 3.96875,3.96875 0 0 1 3.96875,3.96875 A 3.96875,3.96875 0 0 1 15.875,12.937712 3.96875,3.96875 0 0 1 11.90625,8.9689616 3.96875,3.96875 0 0 1 15.875,5.0002116 Z m -3.799251,7.6341594 a 5.2916665,5.2916679 0 0 0 3.798734,1.62574 5.2916665,5.2916679 0 0 0 3.784265,-1.611271 c 2.005485,0.930698 3.952731,2.351984 3.952731,3.905188 v 1.698088 c 0,1.446189 -0.983516,2.610693 -2.20555,2.610693 H 10.343555 c -1.2220355,0 -2.2060672,-1.164504 -2.2060672,-2.610693 v -1.698088 c 0,-1.586689 1.9378612,-3.000257 3.9382612,-3.919657 z"
      />
      }
    </svg>
  </button>
  @if(isUserMenuOpen){
  <nav class="user-menu">
    <ul class="flex flex-col gap-1">
      @for (menuItem of menuItems; track menuItem.id) {
      <li>
        @if(menuItem.action){
        <button
          (click)="handleUserMenuAction(menuItem.action)"
          class="user-link"
        >
          {{ menuItem.label }}
        </button>
        } @else {
        <a href="" class="user-link" (click)="toggleUserMenu()">
          <span class="text-nowrap">{{ menuItem.label }}</span>
        </a>

        }
      </li>
      }
    </ul>
  </nav>

  }
</div>
